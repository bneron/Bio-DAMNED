---
################################################################################
# Bio-DAMNED - Bio-Data Ansible MaNagED                                        #
#                                                                              #
# Authors: Bertrand Néron                                                      #
# Copyright © 2016  Institut Pasteur (Paris).                                  #
#                                                                              #
# Bio-DAMNED is distributed under the terms of the GNU General Public License  #
# (GPLv3). See the LICENSE file for details.                                   #
################################################################################

- name: Creation of {{ bank_group }} group
  group:
    name={{ bank_group}}
    state=present

- name: Creation of {{ bank_user }} user
  user:
    name={{ bank_user}}
    comment="biological data bank user"
    home={{ bank_root }}
    shell=/bin/bash
    state=present

- name: create bank tree root
  file: path={{ bank_root }} state=directory owner={{ bank_user }} group={{ bank_group }} mode=775

- name: create root directory for indexes
  file: path={{ bank_root}}/index state=directory owner={{ bank_user }} group={{ bank_group }} mode=775

- name: create directory for specifics indexes
  file: path={{ bank_root}}/index/{{ item }} state=directory owner={{ bank_user }} group={{ bank_group }} mode=775
  with_items:
    - blast2
    - blast+
    - bowtie
    - bowtie2
    - bwa
    - fusioncatcher
    - gatk
    - golden
    - hmmer
    - picard
    - samtools
    - soap

- name: create directory for fasta files
  file: path={{ bank_root}}/fasta state=directory owner={{ bank_user }} group={{ bank_group }} mode=775

- name: create directory for distant data banks
  file: path={{ bank_root }}/distbanks state=directory owner={{ bank_user }} group={{ bank_group }} mode=775